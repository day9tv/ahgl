{% extends "site_base.html" %}

{% load i18n %}
{% load account_tags %}
{% load pagination_tags %}

{% block head_title %}{% trans "Standings" %}{% endblock %}

{% block body %}
    <h1>{% trans "Standings" %}</h1>

	{% regroup object_list by stage as stage_list %}
    {% for stage in stage_list %}
    <div class="accordion-group">
      <h3 class="accordion-heading">
        <a data-toggle="collapse" href="#stage{{stage.grouper}}" class="accordion-toggle" >
          Stage {{stage.grouper}}
        </a>
      </h3>
      <div id="stage{{stage.grouper}}" class="accordion-body{% if forloop.first %} in{% endif %} collapse">
        <div class="accordion-inner">
          <table class="table">
		    <thead><tr><th>Rank</th><th>Team</th><th>Wins/Losses</th><th>Tiebreaker Points</th><th>Learn more about the Team</th></tr></thead>
		    <tbody>
		    {% for round in stage.list %}
		    <tr><th colspan="5">Division {{round.name}}</th></tr>
              {% for team_roundmembership in round.participants %}
              {% with team=team_roundmembership.team %}
                  <tr>
                  <td>{{forloop.counter}}</td><td>{{team.name}}</td><td>{{team_roundmembership.wins}}/{{team_roundmembership.losses}}</td><td>{{team_roundmembership.tiebreaker}}</td>
                  <td><a href="{{team.get_absolute_url}}">{{team.name}} Team Link</a></td>
                  </tr>
              {% endwith %}
              {% endfor %}
		    {% endfor %}
		    </tbody>
          </table>
        </div>
      </div>
     </div>
     {% endfor %}

{% endblock %}